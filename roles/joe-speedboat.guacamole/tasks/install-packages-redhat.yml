---
# tasks file for joe-speedboat.guacamole

- name: Install epel repository
  yum:
    name: epel-release
    state: present

- name: Add necessary repository
  yum:
    name: http://li.nux.ro/download/nux/dextop/el7/x86_64/nux-dextop-release-0-5.el7.nux.noarch.rpm
    state: present

- name: Add nux desktop repository signing key
  rpm_key:
    key: /etc/pki/rpm-gpg/RPM-GPG-KEY-nux.ro

- name: Install rpmfusion repository
  yum:
    name: "{{ item }}"
    validate_certs: no
    disable_gpg_check: yes
  with_items:
    - https://download1.rpmfusion.org/free/el/rpmfusion-free-release-7.noarch.rpm
    - https://download1.rpmfusion.org/nonfree/el/rpmfusion-nonfree-release-7.noarch.rpm

- name: Install necessary packages
  yum:
    name: '{{ item.package }}'
    state: present
  with_items: "{{ guacamole_packages_EL }}"
